<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>test</title>
	<script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
	<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
	<link href="//unpkg.com/layui@2.7.6/dist/css/layui.css" rel="stylesheet">
	<script src="//unpkg.com/layui@2.7.6/dist/layui.js"></script>
	<style type="text/css">

h2 {margin: 3rem;}
.layui-form {margin-right: 3rem;margin-left: -3rem;}
.layui-input-block{margin-top: 1rem;}
</style>

</head>
<body>

	<h2 align="center">羊了个羊闯关</h2>
	<div class="layui-form">

  <div class="layui-form-item">
  	

	      	<label class="layui-input-block">token:</label>
	      <div class="layui-input-block">
	      	
					<textarea id="token" placeholder="请输入token" required  lay-verify="required" class="layui-textarea" rows="8"></textarea>
				</div>

	</div>
  <div class="layui-form-item">
					<label class="layui-input-block">次数:</label>
			<div class="layui-input-block">
					<input class="layui-input" width="10px" required  lay-verify="required" type="text" id="num" value="1"></input>
					<button class="layui-btn layui-btn-primary layui-border-red" id="numbt1">1次</button> 
  <button class="layui-btn layui-btn-primary layui-border-red" id="numbt2">3次</button>
  <button class="layui-btn layui-btn-primary layui-border-red" id="numbt3">10次</button>

			</div>

  </div>
<div class="layui-form-item" align="center">
    <div class="layui-input-block">
  <button class="layui-btn layui-btn-primary layui-border-red" id="numbt1">1次</button> 
  <button class="layui-btn layui-btn-primary layui-border-red" id="numbt2">3次</button>
  <button class="layui-btn layui-btn-primary layui-border-red" id="numbt3">10次</button>
      </div>
  </div>

   <div class="layui-form-item" align="center">
    <div class="layui-input-block">
      <button class="layui-btn" id="btn">闯 关</button>
      <button type="reset" class="layui-btn layui-btn-primary">重 置</button>
    </div>
  </div>

   <div class="layui-form-item">
    <div class="layui-input-block">
      <h6 id="result"></h6>
    </div>
  </div>

					
</div>
</body>

<script type="text/javascript">

	let btn = document.querySelector("#btn");
    btn.addEventListener("click",function (params) {
		let token = document.querySelector("#token").value;
		let num = document.querySelector("#num").value;
		
		let url = 'https://cat-match.easygame2021.com/sheep/v1/game/game_over?t='+token+'&rank_score=1&rank_state=1&rank_time=888&rank_role=1&skin=1';
		
		for(let index = 1;index <= num;index++){
		axios.get(url).then(function (res) {
			var data = res.data;
			console.log(data);
			if(data.err_code == 0)
				$("#result").text('闯关成功'+index+'次');
			
		});
		}
        });
</script>

</html>
